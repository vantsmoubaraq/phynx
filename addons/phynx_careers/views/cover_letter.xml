<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <!-- ===================== -->
    <!-- QWeb Report Template -->
    <!-- ===================== -->
    <template id="report_cover_template">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <t t-foreach="docs" t-as="applicant">
                    <div class="page">
                        <div style="width:100%; overflow:hidden; margin-bottom:20px;">

                            <!-- Left side: Headings and paragraphs -->
                            <div style="float:left; width:80%;">
                                <h1 style="color:#2c3e50; margin:0;">Cover Letter</h1>
                                <h2 style="margin:5px 0 0 0;"><t t-esc="applicant.partner_name"/></h2>
                                <p style="margin:2px 0;"><t t-esc="applicant.email_cc"/> | <t t-esc="applicant.partner_phone"/></p>
                                <p style="margin:2px 0;"><t t-if="applicant.application_id.city"><t t-esc="applicant.application_id.city"/></t> , <t t-if="applicant.application_id.country_id.name"><t t-esc="applicant.application_id.country_id.name"/></t></p>
                                <p style="margin:2px 0;"><strong>Position Applied:</strong> <t t-esc="applicant.job_id.name"/></p>
                            </div>

                            <!-- Right side: Applicant photo -->
                            <t t-if="applicant.application_id.image_1920">
                                <div style="float:right; width:20%; text-align:right;">
                                    <img t-att-src="'data:image/png;base64,' + applicant.application_id.image_1920.decode('utf-8')"
                                         style="max-height:100px; height:auto; width:auto;"/>
                                </div>
                            </t>

                        </div>
                        <hr/>
                        <t t-esc="applicant.cover_letter"/>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <!-- ===================== -->

    <record id="action_report_cover" model="ir.actions.report">
        <field name="name">Applicant Cover</field>
        <field name="model">hr.applicant</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">phynx_careers.report_cover_template</field>
        <field name="print_report_name">'Cover Letter - %s' % (object.partner_name or 'Applicant')</field>
    </record>

</odoo>
